﻿@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@using RenderGalleyRazor.Models;
@inject RenderGalleyRazor.Models.DatabaseContext dbContext

@{
    var user_id = 0;

    if (SignInManager.IsSignedIn(User))
    {
        var user = dbContext.Users.Where(x => x.Email == User.Identity.Name).FirstOrDefault();
        user_id = user.Id;
    }
    var users = dbContext.Users.Where(x => x.Id == user_id).FirstOrDefault();

}

<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css'>
<link rel="stylesheet" href="~/css/perfil.css">

<div class="container">
    <div class="row justify-content-center">
        <div class="col-6 uxa-form-group mt-5">

            <h1 class="text-center mt-5 mb-2">@users.Name</h1>
            <!-- single sentence description -->
            <p class="lead text-center">@User.Identity.Name</p>
            <!-- /single sentence description -->
            <!-- Adicione um ID à div de avatar para referenciá-la facilmente no JavaScript e CSS -->
            <div class="uxa-user-avatar" id="avatarContainer" onmouseover="showChangeImageButton()" onmouseout="hideChangeImageButton()">
                <img id="userAvatar" src="~/@users.Pic" alt="User avatar">
                <button type="button" class="btn btn-link" id="changeImageButton" onclick="openFileSelector()"></button>
                <!-- Botão para trocar a imagem -->
            </div>

            <form class="mt-5 mb-5" id="accountDetailsForm">

                <!-- Adiciona um campo de input para a imagem, mas o mantém oculto -->
                <input type="file" class="form-control-file" id="avatarInput" accept="image/" style="display: none" onchange="previewImage(this)">

                <div class="form-group">
                    <label for="exampleInputEmail1">Email<span></span></label>
                    <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="">
                </div>

                <div class="form-group">
                    <label for="exampleInputName">Nome<span></span></label>
                    <input type="text" class="form-control" id="exampleInputName" aria-describedby="emailHelp" placeholder="">
                </div>

                <div class="form-group">
                    <label for="exampleInputName">Celular<span></span></label>
                    <input type="text" class="form-control" id="exampleInputCelular" aria-describedby="emailHelp" placeholder="">
                </div>

                <div class="form-group">
                    <label for="exampleInputName">Redefinir Senha<span></span></label>
                    <input type="password" class="form-control" id="exampleInputSenha" aria-describedby="emailHelp" placeholder="">
                </div>

                <div class="form-group">
                    <label for="exampleInputName">Confirme Sua Senha<span></span></label>
                    <input type="password" class="form-control" id="exampleInputConfirmSenha" aria-describedby="emailHelp" placeholder="">
                </div>
            </form>

            <a class="custom-button" onclick="atualizarDetalhes()">Atualizar detalhes da conta</a>

        </div>
    </div>
</div>
<!-- partial -->
<script src="~/js/perfil.js"></script>